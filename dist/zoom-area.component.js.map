{"version":3,"sources":["../src/zoom-area.component.ts"],"names":[],"mappings":"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","file":"zoom-area.component.js","sourceRoot":"","sourcesContent":["import { Component, ViewChild, Input, Output, EventEmitter, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { Gesture, Content } from 'ionic-angular';\nimport { ZoomAreaProvider } from './zoom-area.provider';\n\n\nexport class ZoomAreaComponent implements OnChanges, AfterViewInit {\n     zoom;\n     content: Content;\n\n     afterZoomIn = new EventEmitter<any>();\n     afterZoomOut = new EventEmitter<any>();\n\n     controls: boolean;\n     controlsChanged = new EventEmitter<boolean>();\n\n     scale: number;\n     scaleChanged = new EventEmitter<number>();\n\n    zoomControlsState;\n    zoomRootElement;\n    gesture;\n\n    constructor (\n      public zoomAreaProvider: ZoomAreaProvider\n    ) {\n      this.zoomControlsState = 'hidden';\n    }\n\n    ngOnChanges (changes: SimpleChanges) {\n      if ('controls' in changes) {\n        let showControls = changes['controls'];\n\n        if (showControls && showControls.currentValue) {\n          this.zoomControlsState = 'shown';\n        } else {\n          this.zoomControlsState = 'hidden';\n        }\n      }\n\n      if ('scale' in changes) {\n        let scaleValue = changes['scale'];\n\n        if (scaleValue && scaleValue.currentValue && scaleValue.currentValue === 1) {\n          this.zoomReset();\n        }\n      }\n    }\n\n    ngAfterViewInit () {\n      this.content.ionScroll.subscribe((data)=>{\n        this.zoomAreaProvider.notifyScroll(data);\n      });\n\n      this._pinchZoom(this.zoom.nativeElement, this.content);\n    }\n\n    zoomConfig = {\n      ow: 0,\n      oh: 0,\n      original_x: 0,\n      original_y: 0,\n      max_x: 0,\n      max_y: 0,\n      min_x: 0,\n      min_y: 0,\n      x: 0,\n      y: 0,\n      last_x: 0,\n      last_y: 0,\n      scale: 1,\n      base: 1,\n    };\n\n    toggleZoomControls () {\n      this.zoomControlsState = this.zoomControlsState === 'shown' ? 'hidden' : 'shown';\n    }\n  \n    zoomIn () {\n      this.zoomConfig.scale += 1;\n  \n      if (this.zoomConfig.scale > 1) {\n        this.zoomAreaProvider.notifyScrollState(this.zoomAreaProvider.SCROLL_STATE.COLAPSED);\n      }\n  \n      if (this.zoomConfig.scale > 4) {\n        this.zoomConfig.scale = 4;\n      }\n\n      this.transform();\n      this.afterZoomIn.emit();\n    }\n  \n    zoomOut (reset?) {\n      if (!this.zoomRootElement) {\n        return;\n      }\n  \n      this.zoomConfig.scale -= 1;\n  \n      if (this.zoomConfig.scale < 1) {\n        this.zoomConfig.scale = 1;\n      }\n  \n      if (this.zoomConfig.scale === 1) {\n        reset = true;\n        this.zoomAreaProvider.notifyScrollState(this.zoomAreaProvider.SCROLL_STATE.NORMAL);\n      }\n  \n      reset ? this.transform(0.1, 0.1) : this.transform();\n  \n      this.afterZoomOut.emit();\n    }\n  \n    zoomReset () {\n      this.zoomConfig.scale = 1;\n      if (this.content && this.content.scrollTop) {\n        this.content.scrollTop = 0;\n      }\n      this.zoomOut(true);\n    }\n  \n    private _pinchZoom(elm: HTMLElement, content: Content): void {\n      this.zoomRootElement = elm;\n      this.gesture = new Gesture(this.zoomRootElement);\n  \n      for (let i = 0; i < elm.children.length; i++) {\n        let c = <HTMLElement>elm.children.item(i);\n        this.zoomConfig.ow = c.offsetWidth;\n        this.zoomConfig.oh += c.offsetHeight;\n      }\n  \n      this.zoomConfig.original_x = content.contentWidth - this.zoomConfig.ow;\n      this.zoomConfig.original_y = content.contentHeight - this.zoomConfig.oh;\n      this.zoomConfig.max_x = this.zoomConfig.original_x;\n      this.zoomConfig.max_y = this.zoomConfig.original_y;\n      this.zoomConfig.base = this.zoomConfig.scale;\n  \n      this.gesture.listen();\n      this.gesture.on('pan', this.onPan.bind(this));\n      this.gesture.on('panend', this.onPanend.bind(this));\n      this.gesture.on('pancancel',this. onPanend.bind(this));\n      this.gesture.on('tap', this.onTap.bind(this));\n      this.gesture.on('pinch', this.onPinch.bind(this));\n      this.gesture.on('pinchend', this.onPinchend.bind(this));\n      this.gesture.on('pinchcancel', this.onPinchend.bind(this));\n    }\n  \n    onPan(ev) {\n      if (this.zoomConfig.scale === 1) {\n        return;\n      }\n      \n      this.setCoor(ev.deltaX, ev.deltaY);\n      this.transform();\n    }\n  \n    onPanend() {\n      this.zoomConfig.last_x = this.zoomConfig.x;\n      this.zoomConfig.last_y = this.zoomConfig.y;\n    }\n  \n    onTap(ev) {\n      if (ev && ev.tapCount > 1) {\n        let reset = false;\n        this.zoomConfig.scale += .5;\n        if (this.zoomConfig.scale > 2) {\n          this.zoomConfig.scale = 1;\n          reset = true;\n        }\n  \n        this.setBounds();\n        reset ? this.transform(this.zoomConfig.max_x/2, this.zoomConfig.max_y/2) : this.transform();\n      }\n    }\n  \n    onPinch(ev) {\n      this.zoomConfig.scale = this.zoomConfig.base + (ev.scale * this.zoomConfig.scale - this.zoomConfig.scale)/this.zoomConfig.scale\n      this.setBounds();\n      this.transform();\n    }\n  \n    onPinchend(ev) {\n      if (this.zoomConfig.scale > 4) {\n        this.zoomConfig.scale = 4;\n      }\n  \n      if (this.zoomConfig.scale < 1) {\n        this.zoomConfig.scale = 1;\n      }\n  \n      this.zoomConfig.base = this.zoomConfig.scale;\n      this.setBounds();\n      this.transform();\n    }\n  \n    setBounds() {\n      let scaled_x = Math.ceil((this.zoomRootElement.offsetWidth * this.zoomConfig.scale - this.zoomRootElement.offsetWidth) / 2);\n      let scaled_y = Math.ceil((this.zoomRootElement.offsetHeight * this.zoomConfig.scale - this.zoomRootElement.offsetHeight) / 2);\n  \n      let overflow_x = Math.ceil(this.zoomConfig.original_x * this.zoomConfig.scale - this.zoomConfig.original_x);\n      let overflow_y = Math.ceil(this.zoomConfig.oh * this.zoomConfig.scale - this.zoomConfig.oh);\n  \n      this.zoomConfig.max_x = this.zoomConfig.original_x - scaled_x + overflow_x;\n      this.zoomConfig.min_x = 0 + scaled_x;\n  \n      this.zoomConfig.max_y = this.zoomConfig.original_y + scaled_y - overflow_y;\n      this.zoomConfig.min_y = 0 + scaled_y;\n  \n      this.setCoor(-scaled_x, scaled_y);\n    }\n  \n    setCoor(xx: number, yy: number) {\n      this.zoomConfig.x = Math.min(Math.max((this.zoomConfig.last_x + xx), this.zoomConfig.max_x), this.zoomConfig.min_x);\n      this.zoomConfig.y = Math.min(Math.max((this.zoomConfig.last_y + yy), this.zoomConfig.max_y), this.zoomConfig.min_y);\n    }\n  \n    transform(xx?: number, yy?: number) {\n      this.zoomRootElement.style.transform = `translate3d(${xx || this.zoomConfig.x}px, ${yy || this.zoomConfig.y}px, 0) scale3d(${this.zoomConfig.scale}, ${this.zoomConfig.scale}, 1)`;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n selector: 'zoom-area',\n template: `\n    <ion-content>\n      <div #zoomAreaRoot class=\"zoom\" (click)=\"toggleZoomControls()\">\n          <div class=\"fit\">\n              <ng-content></ng-content>\n          </div>\n      </div>\n\n      <ion-fab right top [@visibilityChanged]=\"zoomControlsState\">\n          <button (click)=\"zoomIn()\" ion-fab color=\"primary\" [hidden]=\"true\" class=\"btn-zoom\">\n              <ion-icon name=\"add-circle\"></ion-icon>\n          </button>\n\n          <button (click)=\"zoomOut()\" ion-fab color=\"primary\" [hidden]=\"true\" class=\"btn-zoom\">\n              <ion-icon name=\"remove-circle\"></ion-icon>\n          </button>\n\n          <button (click)=\"zoomReset()\" ion-fab color=\"primary\" class=\"btn-zoom\">\n              <ion-icon name=\"md-contract\"></ion-icon>\n          </button>\n      </ion-fab>\n    </ion-content>\n`,\n animations: [\n    trigger('visibilityChanged', [\n      state('shown', style({ opacity: 1, display: 'block' })),\n      state('hidden', style({ opacity: 0, display: 'none' })),\n      transition('shown => hidden', animate('300ms')),\n      transition('hidden => shown', animate('300ms')),\n    ])\n ],\n styles: [\n  `\n  :host {\n    display: block;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n  `\n ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ZoomAreaProvider, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'zoom': [{ type: ViewChild, args: ['zoomAreaRoot', ] },],\n'content': [{ type: ViewChild, args: [Content, ] },],\n'afterZoomIn': [{ type: Output },],\n'afterZoomOut': [{ type: Output },],\n'controls': [{ type: Input },],\n'controlsChanged': [{ type: Output },],\n'scale': [{ type: Input },],\n'scaleChanged': [{ type: Output },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}